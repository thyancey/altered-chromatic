{"version":3,"sources":["themes/index.ts","scenes/keyboard/slice.ts","app/hooks.ts","scenes/keyboard/instrument.tsx","scenes/keyboard/scalegroups.tsx","scenes/keyboard/scales.tsx","scenes/keyboard/index.tsx","scenes/about/index.tsx","scenes/main/index.tsx","examples/counter/counterAPI.ts","examples/counter/counterSlice.ts","app/store.ts","serviceWorker.ts","index.tsx"],"names":["createGlobalStyle","getColor","colorId","store","colors","black","grey","grey_light","white","blue","green","yellow","red","purple","shadows","z1","z2","z3","breakpoints","mobile_tiny","mobile_medium","mobile_large","tablet","desktop","NOTES","SPECIAL_ACCIDENTALS","SCALES","label","intervals","keyboardSlice","createSlice","name","initialState","activeNote","activeScale","reducers","setActiveNote","state","action","payload","setActiveScale","actions","getActiveNote","keyboard","getActiveScale","selectAllOctiveNotes","createSelector","notes","Array","from","length","map","k","idx","octave","Math","floor","noteLabel","selectActiveScale","octaveNotes","curIdx","findIndex","oN","scaleDef","id","interval","selectAllMajorScales","Object","keys","scaleKey","getScaleStatus","octaveNote","scaleNotes","includes","selectKeyboardKeys","allOctaveNotes","activeScaleObj","startIdx","split","note","keyStyle","scaleStatus","type","useAppDispatch","useDispatch","useAppSelector","useSelector","ScContainer","styled","div","ScInstrument","ScKeyboardBaseKey","p","css","ScKeyboardKey","ScAccidentalKeyboardKey","Instrument","dispatch","onClick","e","keyObj","ctrlKey","console","log","ScScaleNote","li","ScScaleGroup","ScScaleLabel","isActive","ScaleGroups","allScales","scaleObj","clickedId","Scales","Keyboard","About","ScHeader","ScStage","ScCopyright","a","Main","useState","collapsed","setCollapsed","pages","route","text","element","className","i","to","path","href","target","fetchCount","amount","Promise","resolve","setTimeout","data","incrementAsync","createAsyncThunk","response","counterSlice","value","status","increment","decrement","incrementByAmount","extraReducers","builder","addCase","pending","fulfilled","configureStore","reducer","counter","counterReducer","keyboardReducer","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.8f05785a.chunk.js","sourcesContent":["import { createGlobalStyle } from \"styled-components\"\n\nexport default createGlobalStyle`\n  *{\n    margin: 0;\n    padding: 0;\n    outline:0;\n    box-sizing:border-box;\n  }\n  #root{\n    margin:0 auto;\n  }\n  h1, h2, h3, h4{\n    font-family: 'Bevan', cursive;\n  }\n  a, p, span, h5, h6{\n    font-family: 'Cabin', sans-serif;\n  }\n  h1{\n    font-size: 5rem;\n  }\n  h2{\n    font-size: 4rem;\n  }\n  h3{\n    font-size: 3.5rem;\n  }\n  h4{\n    font-size: 2.5rem;\n  }\n  h5{\n    font-size: 2rem;\n  }\n  p, span{\n    font-size:2rem;\n  }\n\n  html{\n    font-size: 62.5%;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    font-family: 'Cabin', sans-serif;\n    background-color: black;\n  }\n  \n  code {\n    font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace;\n  }\n`\n\n/*\nexport const mixinFontFamily = (style) => {\n  switch(style){\n    case 'details' : return css`font-family: 'Roboto', sans-serif`;\n    case 'display': return css`font-family: 'Bevan', cursive`;\n    default: return css`font-family: 'Roboto', sans-serif`;\n  }\n}\n*/\nexport const listColors = () => {\n  return Object.keys(store.colors);\n}\n\n\nexport const getColor = (colorId: tColor) => {\n  return store.colors[colorId] as CssString; \n}\n\nexport const getShadow = (shadowId: tShadow) => {\n  return store.shadows[shadowId] as CssString;\n}\n\nexport const getBreakpoint = (breakpointId: tBreakpoint) => {\n  return store.breakpoints[breakpointId] as CssString;\n}\n\ntype CssString = string;\n\ntype tShadow = 'z1' | 'z2' | 'z3';\nconst shadows = {\n  z1: '-0.1rem 0.1rem .25rem .1rem rgba(0,0,0,0.16)',\n  z2: '-0.1rem 0.1rem .25rem .1rem rgba(0,0,0,0.36)',\n  z3: '-.2rem .5rem 1rem .2rem rgba(0,0,0,.36)'\n}\ntype tColor = 'black' | 'grey' | 'grey_light' | 'white' | 'blue' | 'green' | 'yellow' | 'red' | 'purple';\nconst colors = {\n  black: '#000000',\n  grey: '#373737',\n  grey_light: '#A39F8E',\n  white: '#fef8dd',\n  blue: '#1fb9f3',\n  green: '#51f249',\n  yellow: '#fff249',\n  red: '#F55658',\n  purple: '#6b1ff3'\n}\n\ntype tBreakpoint = 'mobile_tiny' | 'mobile_medium' | 'mobile_large' | 'tablet' | 'desktop';\nconst breakpoints = {\n  mobile_tiny: '300px',\n  mobile_medium: '400px',\n  mobile_large: '500px',\n  tablet: '768px',\n  desktop: '1024px'\n}\n\ntype ThemeStore = {\n  colors: typeof colors,\n  shadows: typeof shadows,\n  breakpoints: typeof breakpoints\n}\n\nexport const store: ThemeStore = {\n  colors: colors,\n  shadows: shadows,\n  breakpoints: breakpoints\n}\n","import { createSelector, createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { RootState } from '../../app/store';\n\nexport interface KeyboardState {\n  activeNote: string | null;\n  activeScale: string | null;\n}\n\nconst initialState: KeyboardState = {\n  activeNote: null,\n  activeScale: null,\n};\n\ntype NoteType = 'normal' | 'accidental';\ntype NoteName = 'A' | 'A#' | 'B' | 'B#' | 'C' | 'C#' | 'D' | 'D#' | 'E' | 'E#' | 'F' | 'F#';\nconst NOTES: NoteName[] = [ 'A', 'A#', 'B', 'B#', 'C', 'C#', 'D', 'D#', 'E', 'E#', 'F', 'F#' ];\nconst SPECIAL_ACCIDENTALS: NoteName[] = [ 'A#', 'C#', 'D#' ];\nconst SCALES = {\n  'ionian': {\n    label: 'Ionian (Major)',\n    intervals: [0,2,2,1,2,2,2,1]\n  } as ScaleDef,\n  'dorian': {\n    label: 'Dorian',\n    intervals: [0,2,1,2,2,2,1,2]\n  } as ScaleDef,\n  'phyrgian': {\n    label: 'Phyrgian',\n    intervals: [0,1,2,2,2,1,2,2]\n  } as ScaleDef,\n  'lydian': {\n    label: 'Lydian',\n    intervals: [0,2,2,2,1,2,2,1]\n  } as ScaleDef,\n  'mixolydian': {\n    label: 'Mixolydian',\n    intervals: [0,2,2,1,2,2,1,2]\n  } as ScaleDef,\n  'aeolian': {\n    label: 'Aeolian (Minor)',\n    intervals: [0,2,1,2,2,1,2,2]\n  } as ScaleDef,\n  'locrian': {\n    label: 'Locrian',\n    intervals: [0,1,2,2,1,2,2,2]\n  } as ScaleDef\n};\n\nconst NUM_KEYS = 29;\nconst START_OCTAVE_NOTE = 'A-4';\nconst NUM_OCTAVES = 9;\n\nexport type ScaleStatus = 'root' | 'scale' | 'inactive';\nexport type KeyObj = {\n  note: NoteName,\n  octaveNote: string,\n  keyStyle: boolean,\n  scaleStatus: ScaleStatus,\n  type: NoteType,\n  idx: number\n}\n\nexport type ScaleDef = {\n  label: string,\n  intervals: number[]\n}\n\nexport type ScaleObj = {\n  id: string,\n  label: string,\n  octaveNotes: string[]\n}\n\nexport const keyboardSlice = createSlice({\n  name: 'keyboard',\n  initialState,\n  // The `reducers` field lets us define reducers and generate associated actions\n  reducers: {\n    setActiveNote: (state, action: PayloadAction<string>) => {\n      state.activeNote = action.payload;\n    },\n    setActiveScale: (state, action: PayloadAction<string>) => {\n      if(state.activeScale === action.payload){\n        state.activeScale = null;\n      }else{\n        state.activeScale = action.payload;\n      }\n    }\n  }\n});\n\nexport const { setActiveNote, setActiveScale } = keyboardSlice.actions;\n\nexport const getActiveNote = (state: RootState) => state.keyboard.activeNote;\nexport const getActiveScale = (state: RootState) => state.keyboard.activeScale;\nexport const getNotes = (state: RootState) => NOTES;\n\n\n// generate A-1, A#-1, B-1, B#-1...\nexport const selectAllOctiveNotes = createSelector(\n  [getNotes],\n  (notes): string[] => {\n    const keys = Array.from(Array(NUM_OCTAVES * NOTES.length));\n    return keys.map((k, idx) => {\n      const octave = Math.floor(idx / notes.length);\n      const noteLabel = notes[(idx) % notes.length];\n      return `${noteLabel}-${octave}`;\n    });\n  }\n);\n\n\n\nexport const selectActiveScale = createSelector(\n  [getActiveScale, getActiveNote, selectAllOctiveNotes],\n  (activeScale, activeNote, octaveNotes): ScaleObj | null => {\n    if(!activeNote || !activeScale) return null;\n    let curIdx = octaveNotes.findIndex(oN => oN === activeNote);\n    // @ts-ignore\n    const scaleDef = SCALES[activeScale] as ScaleDef;\n\n    return {\n      id: activeScale,\n      label: scaleDef.label,\n      octaveNotes: scaleDef.intervals.map(interval => {\n        curIdx += interval;\n        return octaveNotes[curIdx];\n      })\n    };\n  }\n);\n\nexport const selectAllMajorScales = createSelector(\n  [getActiveNote, selectAllOctiveNotes],\n  (activeNote, octaveNotes): ScaleObj[] | null => {\n    if(!activeNote) return null;\n\n    return Object.keys(SCALES).map(scaleKey => {\n      let curIdx = octaveNotes.findIndex(oN => oN === activeNote);\n      // @ts-ignore\n      const scaleDef = SCALES[scaleKey] as ScaleDef;\n\n      return {\n        id: scaleKey,\n        label: scaleDef.label,\n        octaveNotes: scaleDef.intervals.map(interval => {\n          curIdx += interval;\n          return octaveNotes[curIdx];\n        })\n      };\n    });\n  }\n);\n\nexport const getScaleStatus = (octaveNote: string, scaleNotes: string[]): ScaleStatus => {\n  if(!scaleNotes.includes(octaveNote)) return 'inactive';\n\n  if(octaveNote === scaleNotes[0] || octaveNote === scaleNotes[scaleNotes.length - 1]){\n    return 'root';\n  }\n  return 'scale';\n}\n\nexport const selectKeyboardKeys = createSelector(\n  [selectAllOctiveNotes, selectActiveScale],\n  (allOctaveNotes, activeScaleObj): KeyObj[] => {\n    const keys = Array.from(Array(NUM_KEYS));\n    const startIdx = allOctaveNotes.findIndex(oN => oN === START_OCTAVE_NOTE);\n    return keys.map((k, idx) => {\n      const octaveNote = allOctaveNotes[idx + startIdx];\n      const noteLabel = octaveNote.split('-')[0] as NoteName;\n      return {\n        note: noteLabel,\n        octaveNote: octaveNote,\n        keyStyle: SPECIAL_ACCIDENTALS.includes(noteLabel),\n        scaleStatus: activeScaleObj ? getScaleStatus(octaveNote, activeScaleObj.octaveNotes) : 'inactive',\n        type: noteLabel.includes('#') ? 'accidental' : 'normal',\n        idx\n      };\n    })\n  }\n);\n\nexport default keyboardSlice.reducer;\n","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\nimport type { RootState, AppDispatch } from './store';\n\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n","import styled, { css } from 'styled-components';\nimport { getColor } from '../../themes';\n\nimport {\n  KeyObj,\n  ScaleStatus,\n  selectKeyboardKeys,\n  setActiveNote,\n} from './slice';\nimport { useAppDispatch, useAppSelector } from '../../app/hooks';\n\n\nexport const ScContainer = styled.div`\n  display:block;\n  text-align:center;\n`\n\nconst ScInstrument = styled.div`\n  padding: 1rem;\n  background-color: ${getColor('blue')};\n  border: 1rem solid ${getColor('white')};\n  border-radius: 1rem;\n  width: max-content;\n  margin: auto;\n`\n\ntype ScKeyboardKeyProps = {\n  scaleStatus: ScaleStatus\n}\n\nexport const ScKeyboardBaseKey = styled.div<ScKeyboardKeyProps>`\n  ${p => p.scaleStatus === 'root' && css`\n    border: .5rem solid ${getColor('red')};\n  `}\n\n  ${p => p.scaleStatus === 'scale' && css`\n    border: .5rem dashed ${getColor('red')};\n  `}\n`\n\nexport const ScKeyboardKey = styled(ScKeyboardBaseKey)`\n  position:relative;\n  display:inline-block;\n  width:4rem;\n  height:13rem;\n  margin-left: .25rem;\n  margin-right: .25rem;\n  background-color: ${getColor('white')};\n  cursor: pointer;\n\n  &:hover{\n    background-color: ${getColor('green')};\n  }\n  \n  span{\n    position:absolute;\n    bottom:.5rem;\n    left:50%;\n    transform: translateX(-50%);\n  }\n`\n\ntype ScAccidentalKeyboardKeyProps = {\n  keyStyle: boolean\n}\n\nexport const ScAccidentalKeyboardKey = styled(ScKeyboardBaseKey)<ScAccidentalKeyboardKeyProps>`\n  position:absolute;\n  display:inline-block;\n  z-index:1;\n  width:3rem;\n  height:7rem;  \n  margin-left:-1.5rem;\n  \n  ${p => p.keyStyle ? css`\n    background-color: ${getColor('black')};\n  ` : css`\n    background-color: ${getColor('grey_light')};\n  `}\n  \n  color: ${getColor('white')};\n  cursor: pointer;\n  box-shadow: .25rem .25rem .5rem .1rem ${getColor('blue')};\n\n  &:hover{\n    background-color: ${getColor('green')};\n    box-shadow: .5rem .5rem .5rem .1rem ${getColor('blue')};\n  }\n\n  span{\n    font-size:1rem;\n    position:absolute;\n    bottom:.5rem;\n    left:50%;\n    transform: translateX(-50%);\n  }\n`\n\nexport function Instrument() {\n  const keys = useAppSelector(selectKeyboardKeys);\n  const dispatch = useAppDispatch();\n\n  const onClick = (e:any, keyObj:KeyObj) => {\n    if(e.ctrlKey){\n      dispatch(setActiveNote(keyObj.octaveNote))\n    }\n\n    console.log(`play ${keyObj.octaveNote}`);\n  }\n\n  return (\n    <ScContainer>\n      <ScInstrument>\n        {keys.map((keyObj, idx) => {\n          if(keyObj.type === 'accidental'){\n            return (\n              <ScAccidentalKeyboardKey \n                  key={keyObj.idx}\n                  onClick={e => onClick(e, keyObj)}\n                  keyStyle={keyObj.keyStyle}\n                  scaleStatus={keyObj.scaleStatus}\n              >\n                  <span>{keyObj.note}</span>\n              </ScAccidentalKeyboardKey>\n            );\n          }else{\n            return (\n              <ScKeyboardKey\n                key={keyObj.idx}\n                scaleStatus={keyObj.scaleStatus}\n                onClick={e => onClick(e, keyObj)}\n              >\n                <span>{keyObj.note}</span>\n              </ScKeyboardKey>\n            );\n          }\n        })}\n      </ScInstrument>\n    </ScContainer>\n  );\n}\n","import styled, { css } from 'styled-components';\nimport { getColor } from '../../themes';\n\nimport {\n  getActiveNote,\n  getActiveScale,\n  selectAllMajorScales,\n  setActiveScale\n} from './slice';\nimport { useAppDispatch, useAppSelector } from '../../app/hooks';\n\nexport const ScContainer = styled.div`\n  background-color: ${getColor('purple')};\n  display:inline-block;\n\n  ul{\n    list-style:none;\n  }\n`\n\nexport const ScScaleNote = styled.li`\n  display:inline-block;\n  list-style:none;\n  margin:.5rem;\n`\n\nexport const ScScaleGroup = styled.div`\n  text-align:left;\n`\ntype ScScaleLabelProps = {\n  isActive: boolean\n}\nexport const ScScaleLabel = styled.p<ScScaleLabelProps>`\n  font-weight: bold;\n  cursor:pointer;\n  &:hover{\n    color:white;\n  }\n\n  ${p => p.isActive && css`\n    color: ${getColor('green')}\n  `}\n`\n\nexport function ScaleGroups() {\n  const allScales = useAppSelector(selectAllMajorScales);\n  const activeScale = useAppSelector(getActiveScale);\n  const activeNote = useAppSelector(getActiveNote);\n  const dispatch = useAppDispatch();\n  if(!allScales) return null;\n\n  const onClick = (e:any, clickedId:string) => {\n    dispatch(setActiveScale(clickedId));\n  }\n\n  return (\n    <ScContainer>\n      {allScales.map((scaleObj, idx) => (\n        <ScScaleGroup key={scaleObj.id}>\n          <ScScaleLabel\n            isActive={scaleObj.id === activeScale}\n            onClick={e => onClick(e, scaleObj.id)}\n          >\n            {`${activeNote?.split('-')[0]} ${scaleObj.label}:`}\n          </ScScaleLabel>\n          <ul>\n            {scaleObj.octaveNotes.map(octaveNote => (\n              <ScScaleNote key={octaveNote}>\n                <span>{octaveNote.split('-')[0]}</span>\n              </ScScaleNote>\n            ))}\n          </ul>\n        </ScScaleGroup>\n      ))}\n    </ScContainer>\n  );\n}\n","import styled from 'styled-components';\nimport { getColor } from '../../themes';\n\nimport {\n  getActiveNote\n} from './slice';\nimport { useAppSelector } from '../../app/hooks';\nimport { ScaleGroups } from './scalegroups';\n\nexport const ScContainer = styled.div`\n  background-color: ${getColor('purple')};\n  text-align:left;\n  display:inline-block;\n  padding: 0rem 2rem;\n\n  ul{\n    list-style:none;\n  }\n\n  >h4{\n    margin-left:-1rem;\n  }\n`\n\nexport function Scales() {\n  const activeNote = useAppSelector(getActiveNote);\n  if(!activeNote) return null;\n\n  return (\n    <ScContainer>\n      <p>{'click a scale name to toggle it on/off'}</p>\n      <h4>{'root note'}</h4>\n      <p>{activeNote}</p>\n      <h4>{'western scales'}</h4>\n      <ScaleGroups />\n    </ScContainer>\n  );\n}\n","import styled from 'styled-components';\nimport { getColor } from '../../themes';\nimport { Instrument } from './instrument';\nimport { Scales } from './scales';\n\nexport const ScContainer = styled.div`\n  position:absolute;\n  left:0;\n  top:0;\n  bottom:0;\n  right:0;\n  background-color: ${getColor('grey')};\n  z-index:-1;\n  padding-top:5rem;\n  \n  text-align:center;\n\n  >h1{\n    color: ${getColor('green')};\n  }\n\n  >p{\n    color: ${getColor('grey_light')};\n    margin-bottom:1rem;\n  }\n`\n\nexport function Keyboard() {\n  return (\n    <ScContainer>\n      <h1>{'Altered Chromatic.'}</h1>\n      <p>{'ctrl + click to set the key'}</p>\n      <Instrument />\n      <Scales />\n    </ScContainer>\n  );\n}\n","import styled from 'styled-components';\nimport { getColor } from '../../themes';\n\nexport const ScContainer = styled.div`\n  color: ${getColor('green')};\n  text-align:center;\n  margin-top:5rem;\n\n  >p{\n    color: ${getColor('red')};\n  }\n`\n\nexport function About() {\n  return (\n    <ScContainer>\n      <h2>{`I'll explain this soon.`}</h2>\n      <p>{`Next feature: play midi sounds`}</p>\n    </ScContainer>\n  );\n}\n","import { useState } from 'react';\nimport { Keyboard } from '../../scenes/keyboard';\nimport { About } from '../../scenes/about';\nimport { getColor } from '../../themes/';\nimport { HashRouter, Route, Routes, Link } from 'react-router-dom';\nimport styled from 'styled-components';\n\nexport const GroupContainer = styled.div`\n  background-color: ${getColor('blue')};\n  border: 1rem solid ${getColor('white')};\n  border-radius: 5rem;\n  margin: 3rem;\n  padding: 2rem 3.3rem;\n`;\n\nexport const ScHeader = styled.div`\n  position:fixed;\n  top:0;\n  left:0;\n  transition: top .5s ease-in-out;\n\n  width: 100%;\n  height:10rem;\n  border-bottom:.5rem solid ${getColor('blue')};\n  color:white;\n  z-index:1;\n  background-color:black;\n\n  &.collapsed{\n    top:-8rem;\n    transition: top .5s ease-in-out;\n  }\n\n  >.link-button{\n    color:white;\n    display:inline-block;\n    vertical-align:middle;\n    margin:1.4rem 1.8rem;\n    transition: color .5s ease-in;\n    &:hover{\n      color: ${getColor('yellow')};\n      transition: color .2s ease-out;\n    }\n  }\n`;\n\nexport const ScStage = styled.div`\n  position:absolute;\n  left:0;\n  top:0;\n  right:0;\n  bottom:0;\n  padding-top:5rem;\n  z-index:-1;\n`\n\nexport const ScCopyright = styled.a`\n  position:absolute;\n  right:1rem;\n  bottom:.5rem;\n  color: ${getColor('green')};\n  font-size:2rem;\n\n  font-size:2rem;\n  color: ${getColor('blue')};\n  &:visited{\n    color: ${getColor('blue')};\n  }\n\n  &:hover{\n    color: ${getColor('yellow')};\n  }\n`\n\nfunction Main() {\n  const [ collapsed, setCollapsed ] = useState(true);\n  const pages = [\n    {\n      route: '/',\n      text: 'Keyboard',\n      element: <Keyboard/>\n    },\n    {\n      route: '/about',\n      text: 'About',\n      element: <About/>\n    }\n  ]\n  \n  return (\n    <HashRouter>\n      <ScHeader className={ collapsed ? 'collapsed' : ''} onClick={() => setCollapsed(!collapsed)}>\n        {pages.map((p, i) => (\n          <Link key={i} to={p.route} className=\"link-button\">\n            <h2>{p.text}</h2>\n          </Link>\n        ))}\n      </ScHeader>\n      <ScStage>\n        <Routes>\n          {pages.map((p, i) => (\n            <Route key={i} path={p.route} element={p.element} />\n          ))}\n        </Routes>\n        <ScCopyright href=\"http://thomasyancey.com\" target=\"_blank\">{'©Tom Yancey, 2022'}</ScCopyright>\n      </ScStage>\n    </HashRouter>\n  );\n}\n\nexport default Main;\n","// A mock function to mimic making an async request for data\nexport function fetchCount(amount = 1) {\n  return new Promise<{ data: number }>((resolve) =>\n    setTimeout(() => resolve({ data: amount }), 500)\n  );\n}\n","import { createAsyncThunk, createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { RootState, AppThunk } from '../../app/store';\nimport { fetchCount } from './counterAPI';\n\nexport interface CounterState {\n  value: number;\n  status: 'idle' | 'loading' | 'failed';\n}\n\nconst initialState: CounterState = {\n  value: 0,\n  status: 'idle',\n};\n\n// The function below is called a thunk and allows us to perform async logic. It\n// can be dispatched like a regular action: `dispatch(incrementAsync(10))`. This\n// will call the thunk with the `dispatch` function as the first argument. Async\n// code can then be executed and other actions can be dispatched. Thunks are\n// typically used to make async requests.\nexport const incrementAsync = createAsyncThunk(\n  'counter/fetchCount',\n  async (amount: number) => {\n    const response = await fetchCount(amount);\n    // The value we return becomes the `fulfilled` action payload\n    return response.data;\n  }\n);\n\nexport const counterSlice = createSlice({\n  name: 'counter',\n  initialState,\n  // The `reducers` field lets us define reducers and generate associated actions\n  reducers: {\n    increment: (state) => {\n      // Redux Toolkit allows us to write \"mutating\" logic in reducers. It\n      // doesn't actually mutate the state because it uses the Immer library,\n      // which detects changes to a \"draft state\" and produces a brand new\n      // immutable state based off those changes\n      state.value += 1;\n    },\n    decrement: (state) => {\n      state.value -= 1;\n    },\n    // Use the PayloadAction type to declare the contents of `action.payload`\n    incrementByAmount: (state, action: PayloadAction<number>) => {\n      state.value += action.payload;\n    },\n  },\n  // The `extraReducers` field lets the slice handle actions defined elsewhere,\n  // including actions generated by createAsyncThunk or in other slices.\n  extraReducers: (builder) => {\n    builder\n      .addCase(incrementAsync.pending, (state) => {\n        state.status = 'loading';\n      })\n      .addCase(incrementAsync.fulfilled, (state, action) => {\n        state.status = 'idle';\n        state.value += action.payload;\n      });\n  },\n});\n\nexport const { increment, decrement, incrementByAmount } = counterSlice.actions;\n\n// The function below is called a selector and allows us to select a value from\n// the state. Selectors can also be defined inline where they're used instead of\n// in the slice file. For example: `useSelector((state: RootState) => state.counter.value)`\nexport const selectCount = (state: RootState) => state.counter.value;\n\n// We can also write thunks by hand, which may contain both sync and async logic.\n// Here's an example of conditionally dispatching actions based on current state.\nexport const incrementIfOdd = (amount: number): AppThunk => (\n  dispatch,\n  getState\n) => {\n  const currentValue = selectCount(getState());\n  if (currentValue % 2 === 1) {\n    dispatch(incrementByAmount(amount));\n  }\n};\n\nexport default counterSlice.reducer;\n","import { configureStore, ThunkAction, Action } from '@reduxjs/toolkit';\nimport counterReducer from '../examples/counter/counterSlice';\nimport keyboardReducer from '../scenes/keyboard/slice';\n\nexport const store = configureStore({\n  reducer: {\n    counter: counterReducer,\n    keyboard: keyboardReducer,\n  },\n});\n\nexport type AppDispatch = typeof store.dispatch;\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppThunk<ReturnType = void> = ThunkAction<\n  ReturnType,\n  RootState,\n  unknown,\n  Action<string>\n>;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Main from './scenes/main';\nimport { store } from './app/store';\nimport { Provider } from 'react-redux';\nimport * as serviceWorker from './serviceWorker';\nimport './themes/fonts.css';\nimport GlobalStyle from './themes/';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <Main />\n      <GlobalStyle />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}